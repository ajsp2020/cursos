"use strict";var MarkdownEditor=function(){function t(t){var n,r,e=t.querySelector(".markdownEditor-source"),o=t.querySelector(".markdownEditor-preview"),i=t.querySelector(".markdownEditor-preview-output");null!=e&&null!=o&&(n=function(){var e=arguments;return function(t){a.apply(null,e)}}(e,o,i),t=function(){var t=this,e=arguments;clearTimeout(r),r=setTimeout(function(){n.apply(t,e)},l?300:800)},e.addEventListener("input",t),e.addEventListener("keydown",function(t){a(e,o,i)}),a(e,o,i))}function a(t,e,n){!function t(e,n,r){var o=e.value.replaceAll("[code]","```").replaceAll("[/code]","```");{var i;"undefined"!=typeof marked?(i=marked(o),o={ADD_TAGS:["iframe","p"],ADD_ATTR:["allow","allowfullscreen","frameborder","scrolling"]},o=DOMPurify.sanitize(i,o),n.innerHTML=o,r.value=o):setTimeout(function(){t(e,n,r)},300)}}(t,e,n)}String.prototype.replaceAll=String.prototype.replaceAll||function(t,e){return this.split(t).join(e)};for(var e,l=matchMedia("(min-width: 800px)").matches,n=document.querySelectorAll(".markdownEditor"),r=0;r<n.length;r++)t(n[r]),!l||null!=(e=n[r].querySelector(".markdownEditor-button-preview"))&&gnarus.buttonToggle.toggle(e);return $(".markdownEditor-textArea").on("input",function(){$(".markdownEditor-preview").scrollTop($(".markdownEditor-preview")[0].scrollHeight)}),$(".markdownEditor-button-code").on("click",function(){var t=$(this.closest(".markdownEditor")).find(".markdownEditor-source"),e=$(t)[0],n=$(this).data("insert-code"),r="\n```\n";t.caret(r+n+r);r=t.caret()-r.length;t.caret(r),e.setSelectionRange(r-n.length,r)}),$(".markdownEditor-button-format").on("click",function(){Aria.expandingButton($(this)),"true"===$(this).attr("aria-expanded")&&$(".markdownEditor-help").on("animationend",function(){$(this).focus()})}),{configure:t}}();